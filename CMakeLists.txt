cmake_minimum_required(VERSION 3.2)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED True)
# This is required to get the compile_commands.json file to be generated by Cmake.
set(CMAKE_EXPORT_COMPILE_COMMANDS True)

# Using Hunter as the package manager: https://hunter.readthedocs.io/en/latest/
# So setup Hunter here:
include("HunterGate.cmake")
HunterGate(
    URL "https://github.com/ruslo/hunter/archive/v0.23.111.tar.gz"
    SHA1 "4189bbd869abe4eb69b5303d3f916c03d34dc154"
)

project(ConcurrentHashMap)

# Google Test Package:
hunter_add_package(GTest)
find_package(GTest CONFIG REQUIRED)

add_subdirectory(lib)

add_executable(test unit_tests/main.cpp)
target_link_libraries(test PRIVATE GTest::main)
target_include_directories(test PUBLIC "${PROJECT_SOURCE_DIR}/lib")
target_link_libraries(test PUBLIC Map)
